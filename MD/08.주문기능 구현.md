### ğŸ”· ì£¼ë¬¸ ê¸°ëŠ¥ êµ¬í˜„í•˜ê¸°

ì£¼ë¬¸í•˜ê¸° ë²„íŠ¼ì„ ëˆ„ë¥´ë©´ ì•Œë¦¼ì°½ì„ ë„ìš´ ë’¤ í™•ì¸ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ìµœì¢… êµ¬ë§¤ê°€ ë˜ëŠ” ê¸°ëŠ¥ êµ¬í˜„ì…ë‹ˆë‹¤

#### ğŸ‘‰ ì£¼ë¬¸ í™•ì¸ì°½ êµ¬í˜„

`ProductDetailView.swift` ì—ì„œ ì£¼ë¬¸ì„ í™•ì¸í•˜ëŠ” ì•Œë¦¼ì°½ì„ ë„ìš°ëŠ” ì½”ë“œë¥¼ ì¶”ê°€ í•©ë‹ˆë‹¤

```swift
// ProductDetailView.swift

struct ProductDetailView: View {

	.....

	@State private var showingAlert: Bool = false

	var body: some View {
	VStack(spacing: 0) {
		productImage // ìƒí’ˆ ì´ë¯¸ì§€
		orderView // ìƒí’ˆ ì •ë³´ë¥¼ ì¶œë ¥í•˜ê³  ê·¸ ìƒí’ˆì„ ì£¼ë¬¸í•˜ê¸° ìœ„í•œ ë·°
	}
	// Edge.Set íƒ€ì…ì„ ì „ë‹¬í•˜ì—¬ ê¸°ë³¸ì ìœ¼ë¡œ ë·°ì˜ ì•ˆì „ ì˜ì—­(Safe Area) ë¥¼ ë¬´ì‹œí•˜ê³  ì„¤ì •í•œ ìœ„ì¹˜ì— View ë¥¼ êµ¬ì„±í•  ìˆ˜ ìˆìŒ
	.edgesIgnoringSafeArea(.top)
	// alert ìˆ˜ì‹ì–´ ì¶”ê°€
	.alert("ì£¼ë¬¸í™•ì¸",
					isPresented: $showingAlert,
					actions: { confirmAlert },
					message: { alertMessage }
	)
}

private extension ProductDetailView {
	// ì£¼ë¬¸í•˜ê¸° ë²„íŠ¼
	var placeOrderButton: some View {
		Button(action: {
			self.showingAlert = true // ì£¼ë¬¸í•˜ê¸° ë²„íŠ¼ì„ ëˆŒë €ì„ë•Œ ì•Œë¦¼ì¥ ì¶œë ¥
		}) { .....

	// Alert Actions
	var confirmAlert: some View {
		HStack {
			Button("ì·¨ì†Œ", role: .cancel){}
			Button("í™•ì¸") {
				// ì£¼ë¬¸ ê¸°ëŠ¥ êµ¬í˜„ ì˜ˆì •
			}
		}
	}
	// Alert message
	var alertMessage: some View {
		Text(splitText("\(product.name) ì„(ë¥¼) \(quantity) ê°œ êµ¬ë§¤í•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))
	}
}
```

<img width="300" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º" src="https://user-images.githubusercontent.com/28912774/148539168-c17a17f4-0428-4b02-8f6d-6f8e860cea22.gif">

#### ğŸ‘‰ ì£¼ë¬¸ ê¸°ëŠ¥ ì¶”ê°€

í™•ì¸ ë²„íŠ¼ì„ ëˆŒë €ì„ ë•Œ ìˆ˜í–‰í•  ì£¼ë¬¸ ê¸°ëŠ¥ì„ ì‘ì„±í•´ì•¼ í•©ë‹ˆë‹¤

##### ì£¼ë¬¸(Order) ëª¨ëŒˆ ì¶”ê°€

ë¨¼ì € ì£¼ë¬¸ì •ë³´ë¥¼ ê´€ë¦¬í•  ëª¨ë¸ì´ ì—†ìœ¼ë¯€ë¡œ ëª¨ë¸ ë¶€í„° ì¶”ê°€ í•©ë‹ˆë‹¤

- Order Int íƒ€ì…ì„ ê°€ì§„ ì£¼ë¬¸ ë²ˆí˜¸ë¥¼ ì‹ë³„ìë¡œ ì´ìš©í•˜ë©°, 1ë¶€í„° ì‹œì‘í•´ ì£¼ë¬¸ì´ ë“¤ì–´ ì˜¬ë•Œë§ˆë‹¤ ê³„ì† 1ì”© ì¦ê°€í•˜ë„ë¡ êµ¬í˜„í•œë‹¤ê³  ê°€ì •í•©ë‹ˆë‹¤

- ì´ë¥¼ ìœ„í•´ sequence í•¨ìˆ˜ë¥¼ ì´ìš©í•´ ì´ˆê¹ƒê°’ì„ 0 ìœ¼ë¡œ ì§€ì •í•˜ê³  ë§¤ë²ˆ ë‹¤ìŒë²ˆì— ì˜¬ ê°’ì€ ì´ì „ëŒ€ë¹„ 1ì”© ì¦ê°€í•œ ê°’ì„ êµ¬í˜„ í•©ë‹ˆë‹¤ : `orderSequence`

- Order ì— ëŒ€í•œ instance ë¥¼ ìƒì„± í•  ë•ŒëŠ” ì´ ê°’ì„ ì°¸ê³ í•˜ì—¬ idë¥¼ ì§€ì •í•©ë‹ˆë‹¤.

```swift
//  Orders.swift

import Foundation

// ì‹ë³„ì„ ìœ„í•œ Identifiable í”„ë¡œí† ì½œ ì±„íƒ
struct Order: Identifiable {

	static var orderSequence = sequence(first: 1) { $0 + 1}
	let id: Int
	let product: Product
	let quantity: Int

	var price: Int {
		product.price * quantity
	}
}

```

- `Store.swift` ì—ì„œ ì „ì²´ ì£¼ë¬¸ ëª©ë¡ì„ ê´€ë¦¬ í•  ìˆ˜ ìˆë„ë¡ orders list ë¥¼ ë§Œë“¤ì–´ ì¤ë‹ˆë‹¤. ê·¸ëŸ¬ë©´ placeOrder ë©”ì„œë“œì— ì£¼ë¬¸í•œ ìƒí’ˆê³¼ ìˆ˜ëŸ‰ì˜ ì •ë³´ë¥¼ ë°›ì•„ì„œ ì €ì¥í•´ ì¤ë‹ˆë‹¤

```swift
final class Store: ObservableObject {

	// ì „ì²´ ì£¼ë¬¸ ëª©ë¡
	@Published var orders: [Order] = []

		// ì£¼ë¬¸í• ë•Œ ë§ˆë‹¤ orders ì— append ë˜ê²Œ í•˜ëŠ” method
	func placeOrder(product: Product, quantity: Int) {
		let nextID = Order.orderSequence.next()!
		let order = Order(id: nextID, product: product, quantity: quantity)
		orders.append(order)
	}
}
```

##### ì£¼ë¬¸ ê¸°ëŠ¥ ë°˜ì˜

ì£¼ë¬¸ê¸°ëŠ¥ì„ `ProductDetailView.swift` ì—ì„œ ë°˜ì˜í•´ ì¤ë‹ˆë‹¤

```swift
//  ProductDetailView.swift

struct ProductDetailView: View {

	// Store instance ìƒì„±
	@EnvironmentObject private var store: Store

	.... 	// MARK: Action
	// ìƒí’ˆê³¼ ìˆ˜ëŸ‰ ì •ë³´ë¥¼ placeOrder ë©”ì„œë“œì— ì¸ìˆ˜ë¡œ ì „ë‹¬
	func placeOrder() {
		store.placeOrder(product: product, quantity: quantity)
	}
```

<img width="300" alt="á„‰á…³á„á…³á„…á…µá†«á„‰á…£á†º" src="https://user-images.githubusercontent.com/28912774/148548612-b9be5980-5adb-4c88-8d2e-23bc04a1a9bf.gif">
